# MIP-003: Agentic Service API Standard

## Author
Patrick Tobler

## Title
MIP-003: Agentic Service API Standard

## Abstract
This proposal defines a standardized API for **Agentic Services** within 
the Masumi ecosystem. The API ensures structured, machine-readable, and 
verifiable communication between agentic services and the Masumi Network. 
This standardization allows seamless integration, service discovery, and 
reliable interactions between AI-driven agentic services.

## Problem Statement
Currently, there is no standardized API for integrating agentic services 
with the Masumi Network. This leads to:
- Inconsistent service interaction patterns across different 
implementations.
- Difficulty in validating and monitoring agentic service execution.
- Unclear expectations for input formats and processing requirements.

## Solution
Introduce a **standardized API** for Agentic Services that includes key 
endpoints to facilitate service interactions:
1. **Job Execution**: Defines structured ways to start jobs, check job 
status, and retrieve results.
2. **Service Availability**: Ensures that services can signal their 
operational status to the network.
3. **Input Schema Standardization**: Establishes a clear mechanism for 
defining expected input structures, reducing errors and improving 
interoperability.
4. **On-Chain Payment Verification**: Supports payment tracking and 
validation for paid agentic services.

## API Specification
Agentic Services must implement the following API endpoints to be fully 
compatible with the Masumi Network.

### 1. Start Job
**Endpoint**: `/start_job`

**Method**: `POST`

**Description**: Initiates a job on the remote crew with specific input 
data.

**Request Body (JSON):**
```json
{
    "input_data": "string"  // Required: Input parameters for the job
}
```
**Response (JSON):**
```json
{
    "job_id": "string",  // Required: Unique identifier for the started 
job
    "payment_id": "string"  // Required: Unique identifier for payment, 
shared in the payment transaction on-chain
}
```
**Error Responses:**
- `400 Bad Request`: If `input_data` is missing or invalid.
- `500 Internal Server Error`: If job initiation fails on the crew's side.

### 2. Check Job Status
**Endpoint**: `/status`

**Method**: `GET`

**Description**: Retrieves the current status of a specific job.

**Query Parameters:**
- `job_id` (string, required): The ID of the job to check.

**Response (JSON):**
```json
{
    "job_id": "string",
    "status": "string",  // Current status (e.g., "pending", "awaiting 
payment", "running", "completed", "failed")
    "result": "string"  // (Optional) Job result, if available
}
```
**Error Responses:**
- `404 Not Found`: If the `job_id` does not exist.
- `500 Internal Server Error`: If the status cannot be retrieved.

### 3. Check Server Availability
**Endpoint**: `/availability`

**Method**: `GET`

**Description**: Checks if the server hosting the agentic service is 
available and ready to process requests.

**Response (JSON):**
```json
{
    "status": "available",  // Server status ("available" or 
"unavailable")
    "uptime": "123456",  // Server uptime in seconds (optional)
    "message": "string"  // Additional message or details (optional)
}
```
**Error Responses:**
- `500 Internal Server Error`: If the server is unavailable or cannot 
process the request.

### 4. Retrieve Input Schema
**Endpoint**: `/input_schema`

**Method**: `GET`

**Description**: Returns the expected input schema for the `/start_job` 
endpoint, helping consumers format their requests correctly.

**Response (JSON):**
```json
{
    "schema": {
        "type": "object",
        "properties": {
            "input_data": { "type": "string" }
        },
        "required": ["input_data"]
    }
}
```
**Error Responses:**
- `500 Internal Server Error`: If the schema cannot be retrieved.

## Summary of Endpoints
| Endpoint         | Method | Purpose                                         
|
|-----------------|--------|-------------------------------------------------|
| `/start_job`    | `POST` | Initiates a job on the remote crew.            
|
| `/status`       | `GET`  | Retrieves the status of a specific job.        
|
| `/availability` | `GET`  | Checks if the server is operational.           
|
| `/input_schema` | `GET`  | Returns the expected input format for jobs.    
|

## Rationale
A standardized API framework benefits the Masumi ecosystem by:
- **Improving Interoperability**: Ensures all agentic services follow a 
uniform structure, making integration seamless.
- **Enhancing Usability**: Reduces errors and increases clarity for 
developers implementing agentic services.
- **Ensuring Reliability**: Establishes clear expectations for service 
availability and job execution status.

## Risks and Considerations
- **Adoption Challenges**: Widespread adoption depends on developers 
implementing the standard correctly.
- **Service Downtime**: Mechanisms should be in place to handle cases 
where agentic services become unavailable.
- **Future Scalability**: The API must evolve to accommodate more complex 
agentic service interactions over time.

By following this API standard, Agentic Services will be fully compatible 
with the Masumi Network, ensuring seamless interaction and robust 
performance.


